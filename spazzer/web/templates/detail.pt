<ul xmlns:tal="http://xml.zope.org/namespaces/tal"
    class="album-list data-list list">
    <li class="album-item" tal:repeat="item albums">
      <h3>${fat(item)}&nbsp;&nbsp;<a class="download-link" href="${'%s/download/?artist=%s&amp;album=%s' % (request.application_url,request.url_quote(unicode(artist.name if artist else '')) ,request.url_quote(unicode(item.name)))}">(download)</a></h3>
      <table class="album-table">
	<tr class="track-row" 
	    tal:repeat="track item.get_tracks()">
	  <td class="index-cell">${repeat["track"].index + 1}</td>
	  <td class="title-cell">
	    <span tal:attributes="class 'relevant-track track-title' if track.on_compilation() and artist_context and track.artist == artist_context.name else 'track-title' " tal:content="ftt(track.on_compilation())(track)">track</span>
	  </td>
	  <td class="action-cell">
	    <a class="download-link" 
	       href="${'%s/download/?track=%s' % (request.application_url,str(track.id))}">
	      download
	     </a>
	     &nbsp;&nbsp;
	     <a class="play-link" 
		href="#" onclick="play('${'%s/download/?track=%s' % (request.application_url,str(track.id))}')">
	       play
	     </a>
	  </td>
	</tr>
      </table>
    </li>
</ul>
